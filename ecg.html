<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Serif — Biometric Integration</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { width: 100%; height: 100%; overflow: hidden; background: #0a0a0a; font-family: 'SF Mono', 'Fira Code', 'JetBrains Mono', monospace; }
  
  .dashboard {
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 16px 28px 12px;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(137,204,240,0.1);
    margin-bottom: 8px;
    flex-shrink: 0;
  }
  .header-left {
    display: flex;
    align-items: baseline;
    gap: 16px;
  }
  .logo {
    font-size: 18px;
    font-weight: 300;
    letter-spacing: 5px;
    text-transform: uppercase;
    color: rgba(137,204,240,0.4);
  }
  .patient-id {
    font-size: 11px;
    color: rgba(255,255,255,0.2);
    letter-spacing: 1px;
  }
  .header-right {
    display: flex;
    gap: 24px;
    font-size: 11px;
    color: rgba(255,255,255,0.25);
  }
  .header-right .val {
    color: rgba(137,204,240,0.6);
    font-weight: 600;
  }

  .chart-container {
    flex: 1;
    position: relative;
    min-height: 0;
  }

  canvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* Floating labels */
  .signal-labels {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 130px;
    display: flex;
    flex-direction: column;
    pointer-events: none;
    z-index: 5;
  }
  .label-zone {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 4px;
  }
  .signal-name {
    font-size: 10px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 4px;
  }
  .signal-value {
    font-size: 26px;
    font-weight: 700;
    line-height: 1;
  }
  .signal-unit {
    font-size: 9px;
    color: rgba(255,255,255,0.3);
    margin-top: 2px;
  }
  .signal-cadence {
    font-size: 8px;
    color: rgba(255,255,255,0.15);
    margin-top: 4px;
    letter-spacing: 0.5px;
  }

  .ecg-label .signal-name, .ecg-label .signal-value { color: #5BA8D9; }
  .hrv-label .signal-name, .hrv-label .signal-value { color: #89CCF0; }
  .glucose-label .signal-name, .glucose-label .signal-value { color: #D4A84B; }

  /* Divider lines between zones */
  .zone-divider {
    position: absolute;
    left: 130px;
    right: 0;
    height: 1px;
    background: rgba(255,255,255,0.04);
    z-index: 2;
  }

  .footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 8px;
    border-top: 1px solid rgba(137,204,240,0.08);
    margin-top: 6px;
    flex-shrink: 0;
  }
  .footer-left {
    font-size: 9px;
    color: rgba(255,255,255,0.15);
    letter-spacing: 0.5px;
  }
  .footer-right {
    font-size: 13px;
    font-weight: 300;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: rgba(137,204,240,0.3);
  }
</style>
</head>
<body>
<div class="dashboard">
  <div class="header">
    <div class="header-left">
      <span class="logo">serif</span>
      <span class="patient-id">patient 0042 · integration view · 24h window</span>
    </div>
    <div class="header-right">
      <span>signals: <span class="val">3</span></span>
      <span>cadences: <span class="val">3</span></span>
      <span>sync: <span class="val" style="color:#5BA8D9;">active</span></span>
    </div>
  </div>

  <div class="chart-container">
    <canvas id="main-canvas"></canvas>
    <div class="signal-labels">
      <div class="label-zone ecg-label">
        <div class="signal-name">ECG Lead II</div>
        <div class="signal-value">72</div>
        <div class="signal-unit">bpm</div>
        <div class="signal-cadence">250 Hz continuous</div>
      </div>
      <div class="label-zone hrv-label">
        <div class="signal-name">HRV RMSSD</div>
        <div class="signal-value">48</div>
        <div class="signal-unit">ms</div>
        <div class="signal-cadence">5-min epochs</div>
      </div>
      <div class="label-zone glucose-label">
        <div class="signal-name">CGM Glucose</div>
        <div class="signal-value">94</div>
        <div class="signal-unit">mg/dL</div>
        <div class="signal-cadence">5-min intervals</div>
      </div>
    </div>
    <div class="zone-divider" style="top:33.33%"></div>
    <div class="zone-divider" style="top:66.66%"></div>
  </div>

  <div class="footer">
    <div class="footer-left">multi-cadence temporal alignment · causal inference engine · wearable + clinical signal fusion</div>
    <div class="footer-right">serif</div>
  </div>
</div>

<script>
function seededRandom(seed) {
  let s = seed;
  return function() {
    s = (s * 16807 + 0) % 2147483647;
    return (s - 1) / 2147483646;
  };
}

function render() {
  const canvas = document.getElementById('main-canvas');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);
  const w = rect.width;
  const h = rect.height;
  const leftPad = 140;
  const chartW = w - leftPad;

  // Zone heights — each signal gets 1/3 of total height
  const zoneH = h / 3;

  // Grid lines (vertical — time)
  ctx.strokeStyle = 'rgba(137,204,240,0.03)';
  ctx.lineWidth = 0.5;
  for (let i = 0; i <= 24; i++) {
    const x = leftPad + (i / 24) * chartW;
    ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, h); ctx.stroke();
  }

  // Zone dividers
  ctx.strokeStyle = 'rgba(255,255,255,0.04)';
  ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(leftPad, zoneH); ctx.lineTo(w, zoneH); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(leftPad, zoneH * 2); ctx.lineTo(w, zoneH * 2); ctx.stroke();

  // --- DRAW EACH SIGNAL IN ITS ZONE ---

  function drawInZone(zoneIndex, color, generateData) {
    const yTop = zoneIndex * zoneH;
    const yMid = yTop + zoneH / 2;
    const data = generateData();

    // Baseline
    ctx.strokeStyle = color.replace('1)', '0.08)');
    ctx.lineWidth = 0.5;
    ctx.beginPath(); ctx.moveTo(leftPad, yMid); ctx.lineTo(w, yMid); ctx.stroke();

    // Fill
    ctx.beginPath();
    for (let i = 0; i < data.length; i++) {
      const x = leftPad + (i / data.length) * chartW;
      const y = yMid - data[i] * zoneH * 0.38;
      if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    }
    const grad = ctx.createLinearGradient(0, yTop, 0, yTop + zoneH);
    grad.addColorStop(0, color.replace('1)', '0.05)'));
    grad.addColorStop(0.5, 'transparent');
    grad.addColorStop(1, color.replace('1)', '0.05)'));
    ctx.lineTo(leftPad + chartW, yMid);
    ctx.lineTo(leftPad, yMid);
    ctx.fillStyle = grad;
    ctx.fill();

    // Line
    ctx.beginPath();
    for (let i = 0; i < data.length; i++) {
      const x = leftPad + (i / data.length) * chartW;
      const y = yMid - data[i] * zoneH * 0.38;
      if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    }
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.8;
    ctx.shadowColor = color;
    ctx.shadowBlur = 6;
    ctx.stroke();
    ctx.shadowBlur = 0;

    // Sync dot at 60%
    const syncI = Math.floor(data.length * 0.6);
    const syncX = leftPad + 0.6 * chartW;
    const syncY = yMid - data[syncI] * zoneH * 0.38;
    ctx.fillStyle = color;
    ctx.shadowColor = color;
    ctx.shadowBlur = 8;
    ctx.beginPath();
    ctx.arc(syncX, syncY, 3.5, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  // Sync line across all zones
  const syncX = leftPad + 0.6 * chartW;
  ctx.strokeStyle = 'rgba(91,168,217,0.2)';
  ctx.lineWidth = 1;
  ctx.setLineDash([3, 3]);
  ctx.beginPath(); ctx.moveTo(syncX, 0); ctx.lineTo(syncX, h); ctx.stroke();
  ctx.setLineDash([]);

  // ECG (zone 0)
  drawInZone(0, 'rgba(91, 168, 217, 1)', () => {
    const rng = seededRandom(42);
    const data = [];
    for (let i = 0; i < 2000; i++) {
      const t = (i / 2000) * 40;
      const phase = t % 1;
      let y = 0;
      if (phase > 0.06 && phase < 0.14) y = 0.08 * Math.sin((phase-0.06)/0.08 * Math.PI);
      else if (phase > 0.21 && phase < 0.27) y = 0.8 * Math.sin((phase-0.21)/0.06 * Math.PI);
      else if (phase > 0.27 && phase < 0.32) y = -0.15 * Math.sin((phase-0.27)/0.05 * Math.PI);
      else if (phase > 0.40 && phase < 0.55) y = 0.15 * Math.sin((phase-0.40)/0.15 * Math.PI);
      y += (rng() - 0.5) * 0.02;
      data.push(y);
    }
    return data;
  });

  // HRV (zone 1)
  drawInZone(1, 'rgba(137, 204, 240, 1)', () => {
    const rng = seededRandom(73);
    const data = [];
    let val = 45;
    for (let i = 0; i < 288; i++) {
      val += (rng() - 0.5) * 2;
      val += (45 - val) * 0.02;
      const t = i / 288;
      val += Math.sin(t * Math.PI * 2 - 1) * 15 * 0.3;
      data.push((val - 45) / 30);
    }
    return data;
  });

  // Glucose (zone 2)
  drawInZone(2, 'rgba(212, 168, 75, 1)', () => {
    const rng = seededRandom(128);
    const data = [];
    let val = 95;
    for (let i = 0; i < 288; i++) {
      val += (rng() - 0.5) * 3;
      val += (95 - val) * 0.02;
      const t = i / 288;
      for (const meal of [0.3, 0.5, 0.75]) {
        const dist = Math.abs(t - meal);
        if (dist < 0.05) val += 30 * Math.exp(-dist*dist*2000) * 0.8;
      }
      data.push((val - 95) / 50);
    }
    return data;
  });

  // Time labels
  ctx.fillStyle = 'rgba(255,255,255,0.2)';
  ctx.font = '9px "SF Mono", "Fira Code", monospace';
  ctx.textAlign = 'center';
  const times = ['00:00','04:00','08:00','12:00','16:00','20:00','24:00'];
  for (let i = 0; i < times.length; i++) {
    const x = leftPad + (i / (times.length - 1)) * chartW;
    ctx.fillText(times[i], x, h - 2);
  }
}

render();
window.addEventListener('resize', render);
document.addEventListener('click', () => {
  if (!document.fullscreenElement) document.documentElement.requestFullscreen();
});
</script>
</body>
</html>
