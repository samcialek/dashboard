<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Serif — Multi-Cadence Biometric Integration</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { width: 100%; height: 100%; overflow: hidden; background: #0a0a0a; font-family: 'SF Mono', 'Fira Code', 'JetBrains Mono', monospace; }
  
  .dashboard {
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 20px 28px;
    gap: 4px;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    margin-bottom: 8px;
  }
  .header-left {
    display: flex;
    align-items: baseline;
    gap: 16px;
  }
  .logo {
    font-size: 16px;
    font-weight: 300;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: rgba(255,255,255,0.35);
  }
  .patient-id {
    font-size: 11px;
    color: rgba(255,255,255,0.2);
    letter-spacing: 1px;
  }
  .header-right {
    display: flex;
    gap: 24px;
    font-size: 11px;
    color: rgba(255,255,255,0.25);
  }
  .header-right .val {
    color: rgba(255,255,255,0.5);
    font-weight: 600;
  }

  .row {
    flex: 1;
    display: flex;
    align-items: stretch;
    gap: 0;
    position: relative;
    min-height: 0;
  }

  .row-label {
    width: 120px;
    min-width: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-right: 12px;
    border-right: 1px solid rgba(255,255,255,0.06);
  }
  .signal-name {
    font-size: 10px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 4px;
  }
  .signal-value {
    font-size: 22px;
    font-weight: 700;
    line-height: 1;
  }
  .signal-unit {
    font-size: 9px;
    color: rgba(255,255,255,0.3);
    margin-top: 2px;
  }
  .signal-cadence {
    font-size: 8px;
    color: rgba(255,255,255,0.15);
    margin-top: 4px;
    letter-spacing: 0.5px;
  }

  .chart-area {
    flex: 1;
    position: relative;
    overflow: hidden;
  }

  canvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* Sync marker */
  .sync-line {
    position: absolute;
    top: 0;
    width: 1px;
    height: 100%;
    background: rgba(224, 122, 95, 0.4);
    pointer-events: none;
    z-index: 10;
  }
  .sync-dot {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #E07A5F;
    transform: translate(-50%, -50%);
    z-index: 11;
  }

  .time-axis {
    height: 20px;
    display: flex;
    align-items: center;
    padding-left: 120px;
    border-top: 1px solid rgba(255,255,255,0.06);
    margin-top: 4px;
  }
  .time-axis span {
    font-size: 9px;
    color: rgba(255,255,255,0.2);
    flex: 1;
    text-align: center;
  }

  .footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 8px;
    border-top: 1px solid rgba(255,255,255,0.06);
    margin-top: 4px;
  }
  .footer-left {
    font-size: 9px;
    color: rgba(255,255,255,0.15);
    letter-spacing: 0.5px;
  }
  .footer-right {
    font-size: 12px;
    font-weight: 300;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: rgba(224, 122, 95, 0.35);
  }

  /* Color scheme per signal */
  .ecg .signal-name, .ecg .signal-value { color: #00d864; }
  .hrv .signal-name, .hrv .signal-value { color: #4fc3f7; }
  .spo2 .signal-name, .spo2 .signal-value { color: #E07A5F; }
  .resp .signal-name, .resp .signal-value { color: #ab47bc; }
  .glucose .signal-name, .glucose .signal-value { color: #ffd54f; }
  .activity .signal-name, .activity .signal-value { color: #66bb6a; }
</style>
</head>
<body>
<div class="dashboard">
  <div class="header">
    <div class="header-left">
      <span class="logo">serif</span>
      <span class="patient-id">patient 0042 · integration view · 24h window</span>
    </div>
    <div class="header-right">
      <span>signals: <span class="val">6</span></span>
      <span>cadences: <span class="val">5</span></span>
      <span>sync: <span class="val" style="color:#00d864;">active</span></span>
    </div>
  </div>

  <div class="row ecg">
    <div class="row-label">
      <div class="signal-name">ECG Lead II</div>
      <div class="signal-value">72</div>
      <div class="signal-unit">bpm</div>
      <div class="signal-cadence">250 Hz continuous</div>
    </div>
    <div class="chart-area"><canvas id="c-ecg"></canvas></div>
  </div>

  <div class="row hrv">
    <div class="row-label">
      <div class="signal-name">HRV RMSSD</div>
      <div class="signal-value">48</div>
      <div class="signal-unit">ms</div>
      <div class="signal-cadence">5-min epochs</div>
    </div>
    <div class="chart-area"><canvas id="c-hrv"></canvas></div>
  </div>

  <div class="row spo2">
    <div class="row-label">
      <div class="signal-name">SpO₂</div>
      <div class="signal-value">97</div>
      <div class="signal-unit">%</div>
      <div class="signal-cadence">1-min avg</div>
    </div>
    <div class="chart-area"><canvas id="c-spo2"></canvas></div>
  </div>

  <div class="row resp">
    <div class="row-label">
      <div class="signal-name">Respiration</div>
      <div class="signal-value">14</div>
      <div class="signal-unit">br/min</div>
      <div class="signal-cadence">30-sec windows</div>
    </div>
    <div class="chart-area"><canvas id="c-resp"></canvas></div>
  </div>

  <div class="row glucose">
    <div class="row-label">
      <div class="signal-name">CGM Glucose</div>
      <div class="signal-value">94</div>
      <div class="signal-unit">mg/dL</div>
      <div class="signal-cadence">5-min intervals</div>
    </div>
    <div class="chart-area"><canvas id="c-glucose"></canvas></div>
  </div>

  <div class="row activity">
    <div class="row-label">
      <div class="signal-name">Activity</div>
      <div class="signal-value">3.2</div>
      <div class="signal-unit">METs</div>
      <div class="signal-cadence">1-min bins</div>
    </div>
    <div class="chart-area"><canvas id="c-activity"></canvas></div>
  </div>

  <div class="time-axis">
    <span>00:00</span><span>04:00</span><span>08:00</span><span>12:00</span><span>16:00</span><span>20:00</span><span>24:00</span>
  </div>

  <div class="footer">
    <div class="footer-left">multi-cadence temporal alignment · causal inference engine · wearable × clinical signal fusion</div>
    <div class="footer-right">serif</div>
  </div>
</div>

<script>
// Deterministic seeded random for reproducible "data"
function seededRandom(seed) {
  let s = seed;
  return function() {
    s = (s * 16807 + 0) % 2147483647;
    return (s - 1) / 2147483646;
  };
}

function drawSignal(canvasId, color, opts) {
  const canvas = document.getElementById(canvasId);
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);
  const w = rect.width;
  const h = rect.height;

  // Grid
  ctx.strokeStyle = 'rgba(255,255,255,0.03)';
  ctx.lineWidth = 0.5;
  for (let x = 0; x < w; x += w/24) {
    ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, h); ctx.stroke();
  }
  ctx.beginPath(); ctx.moveTo(0, h/2); ctx.lineTo(w, h/2); ctx.stroke();

  const rng = seededRandom(opts.seed);
  const points = opts.points || 500;
  const data = [];

  if (opts.type === 'ecg') {
    // ECG-like repeating PQRST
    for (let i = 0; i < points; i++) {
      const t = (i / points) * 40; // 40 beats across
      const phase = t % 1;
      let y = 0;
      if (phase > 0.06 && phase < 0.14) y = 0.08 * Math.sin((phase-0.06)/0.08 * Math.PI);
      else if (phase > 0.21 && phase < 0.27) y = 0.8 * Math.sin((phase-0.21)/0.06 * Math.PI);
      else if (phase > 0.27 && phase < 0.32) y = -0.15 * Math.sin((phase-0.27)/0.05 * Math.PI);
      else if (phase > 0.40 && phase < 0.55) y = 0.15 * Math.sin((phase-0.40)/0.15 * Math.PI);
      y += (rng() - 0.5) * 0.02;
      data.push(y);
    }
  } else if (opts.type === 'smooth') {
    // Smooth varying signal (HRV, SpO2, glucose, etc.)
    let val = opts.base;
    for (let i = 0; i < points; i++) {
      val += (rng() - 0.5) * opts.volatility;
      // Mean reversion
      val += (opts.base - val) * 0.02;
      // Add some structure (sleep dip, meal spike, etc.)
      const t = i / points;
      if (opts.pattern === 'sleep') {
        val += Math.sin(t * Math.PI * 2 - 1) * opts.amplitude * 0.3;
      } else if (opts.pattern === 'meals') {
        // Three meal spikes
        for (const meal of [0.3, 0.5, 0.75]) {
          const dist = Math.abs(t - meal);
          if (dist < 0.05) val += opts.amplitude * Math.exp(-dist*dist*2000) * 0.8;
        }
      } else if (opts.pattern === 'activity') {
        // Morning and afternoon activity
        if (t > 0.3 && t < 0.4) val += opts.amplitude * 0.5;
        if (t > 0.6 && t < 0.65) val += opts.amplitude * 0.8;
      }
      data.push((val - opts.base) / opts.range);
    }
  } else if (opts.type === 'resp') {
    for (let i = 0; i < points; i++) {
      const t = i / points;
      let freq = 14 + Math.sin(t * Math.PI * 3) * 3;
      // Slower during sleep
      if (t < 0.3) freq -= 4;
      let y = Math.sin(i * freq * 0.06) * 0.4;
      y += (rng() - 0.5) * 0.05;
      data.push(y);
    }
  }

  // Draw filled area
  ctx.beginPath();
  ctx.moveTo(0, h/2);
  for (let i = 0; i < data.length; i++) {
    const x = (i / data.length) * w;
    const y = h/2 - data[i] * h * 0.4;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  // Fill
  const lastX = w;
  const gradient = ctx.createLinearGradient(0, 0, 0, h);
  gradient.addColorStop(0, color.replace(')', ',0.08)').replace('rgb', 'rgba'));
  gradient.addColorStop(0.5, 'transparent');
  gradient.addColorStop(1, color.replace(')', ',0.08)').replace('rgb', 'rgba'));
  ctx.lineTo(lastX, h/2);
  ctx.lineTo(0, h/2);
  ctx.fillStyle = gradient;
  ctx.fill();

  // Draw line
  ctx.beginPath();
  for (let i = 0; i < data.length; i++) {
    const x = (i / data.length) * w;
    const y = h/2 - data[i] * h * 0.4;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.strokeStyle = color;
  ctx.lineWidth = 1.5;
  ctx.shadowColor = color;
  ctx.shadowBlur = 4;
  ctx.stroke();
  ctx.shadowBlur = 0;

  // Sync marker at ~60% (2:00 PM)
  const syncX = w * 0.6;
  const syncI = Math.floor(data.length * 0.6);
  const syncY = h/2 - data[syncI] * h * 0.4;
  
  ctx.strokeStyle = 'rgba(224, 122, 95, 0.3)';
  ctx.lineWidth = 1;
  ctx.setLineDash([3, 3]);
  ctx.beginPath();
  ctx.moveTo(syncX, 0);
  ctx.lineTo(syncX, h);
  ctx.stroke();
  ctx.setLineDash([]);

  // Dot on line
  ctx.fillStyle = '#E07A5F';
  ctx.shadowColor = '#E07A5F';
  ctx.shadowBlur = 6;
  ctx.beginPath();
  ctx.arc(syncX, syncY, 3, 0, Math.PI * 2);
  ctx.fill();
  ctx.shadowBlur = 0;
}

function render() {
  drawSignal('c-ecg', 'rgb(0, 216, 100)', { type: 'ecg', seed: 42, points: 2000 });
  drawSignal('c-hrv', 'rgb(79, 195, 247)', { type: 'smooth', seed: 73, points: 288, base: 45, volatility: 2, range: 30, amplitude: 15, pattern: 'sleep' });
  drawSignal('c-spo2', 'rgb(224, 122, 95)', { type: 'smooth', seed: 91, points: 1440, base: 97, volatility: 0.3, range: 4, amplitude: 2, pattern: 'sleep' });
  drawSignal('c-resp', 'rgb(171, 71, 188)', { type: 'resp', seed: 55, points: 1000 });
  drawSignal('c-glucose', 'rgb(255, 213, 79)', { type: 'smooth', seed: 128, points: 288, base: 95, volatility: 3, range: 50, amplitude: 30, pattern: 'meals' });
  drawSignal('c-activity', 'rgb(102, 187, 106)', { type: 'smooth', seed: 200, points: 1440, base: 1.5, volatility: 0.3, range: 6, amplitude: 4, pattern: 'activity' });
}

render();
window.addEventListener('resize', render);

// Fullscreen on click
document.addEventListener('click', () => {
  if (!document.fullscreenElement) document.documentElement.requestFullscreen();
});
</script>
</body>
</html>
